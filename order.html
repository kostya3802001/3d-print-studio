<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-ua="Замовити 3D-друк — 3D-PRINT STUDIO" data-pl="Zamów druk 3D — 3D-PRINT STUDIO">Замовити 3D-друк — 3D-PRINT STUDIO</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

<header>
    <div class="logo">
        <img src="log img/Логотип.jpg" alt="Logo">
        3D-PRINT STUDIO
    </div>
    <nav>
        <a href="index.html" data-ua="Головна" data-pl="Główna">Головна</a>
        <a href="figures.html" data-ua="Фігурки" data-pl="Figurki">Фігурки</a>
        <a href="parts.html" data-ua="Деталі" data-pl="Części">Деталі</a>
        <a href="login.html" id="accountLink" data-ua="Кабінет" data-pl="Gabinet">Кабінет</a>
        <span class="lang" style="cursor:pointer">UA | PL</span>
    </nav>
</header>

<section class="section">
    <h1 class="section-title" data-ua="Замовлення 3D-друку" data-pl="Zamówienie druku 3D">Замовлення 3D-друку</h1>

    <div class="grid">
        <div class="card">
            <div class="card-body">
                <h3 data-ua="Дані для прорахунку" data-pl="Dane do kalkulacji">Дані для прорахунку</h3>
                <p data-ua="Заповніть форму — ми зробимо точний прорахунок і звʼяжемось з вами." 
                   data-pl="Wypełnij formularz — dokonamy dokładnej kalkulacji i skontaktujemy się z Tobą.">
                    Заповніть форму — ми зробимо точний прорахунок і звʼяжемось з вами.
                </p>

                <form id="orderForm">
                    <label data-ua="Ваше імʼя" data-pl="Twoje imię">Ваше імʼя</label>
                    <input type="text" id="custName" placeholder="Імʼя" required>

                    <label data-ua="Email або Telegram" data-pl="Email lub Telegram">Email або Telegram</label>
                    <input type="text" id="custContact" placeholder="@username або email" required>

                    <label data-ua="Тип замовлення" data-pl="Typ zamówienia">Тип замовлення</label>
                    <select id="orderType">
                        <option value="STL Print">Друк за STL</option>
                        <option value="Technical Part">Технічна деталь</option>
                        <option value="Figure">Фігурка</option>
                    </select>

                    <label data-ua="Матеріал" data-pl="Materiał">Матеріал</label>
                    <select id="material">
                        <option>PLA</option>
                        <option>PETG</option>
                        <option>ABS / ASA</option>
                        <option>TPU (Гнучкий)</option>
                        <option>PA (Нейлон)</option>
                    </select>

                    <label data-ua="Опис або посилання на STL" data-pl="Opis lub link do STL">Опис або посилання на STL</label>
                    <textarea id="orderDesc" placeholder="Коротко опишіть деталь або вставте посилання на Google Drive/Mega з вашим STL файлом" rows="4"></textarea>

                    <button type="submit" class="btn" style="margin-top:20px;width:100%;" data-ua="Надіслати на прорахунок" data-pl="Wyślij do kalkulacji">
                        Надіслати на прорахунок
                    </button>
                </form>
            </div>
        </div>

        <div class="card">
            <div class="card-body">
                <h3 data-ua="Як проходить замовлення" data-pl="Jak przebiega zamówienie">Як проходить замовлення</h3>

                <div class="step" style="margin-bottom:15px;">
                    <span data-ua="01" data-pl="01">01</span><br>
                    <p data-ua="Ви надсилаєте STL або опис" data-pl="Wysyłasz STL lub opis">Ви надсилаєте STL або опис</p>
                </div>

                <div class="step" style="margin-bottom:15px;">
                    <span data-ua="02" data-pl="02">02</span><br>
                    <p data-ua="Ми робимо точний прорахунок" data-pl="Robimy dokładną kalkulację">Ми робимо точний прорахунок</p>
                </div>

                <div class="step" style="margin-bottom:15px;">
                    <span data-ua="03" data-pl="03">03</span><br>
                    <p data-ua="Ви підтверджуєте замовлення" data-pl="Potwierdzasz zamówienie">Ви підтверджуєте замовлення</p>
                </div>

                <div class="step">
                    <span data-ua="04" data-pl="04">04</span><br>
                    <p data-ua="Друк та відправка" data-pl="Druk i wysyłka">Друк та відправка</p>
                </div>

                <p style="margin-top:20px;color:#999;font-size:14px;" data-ua="✔ Мінімальна сума замовлення — 100 грн<br>✔ Робота з Україною та Польщею" data-pl="✔ Minimalna kwota zamówienia — 15 PLN<br>✔ Obsługa Ukrainy i Polski">
                    ✔ Мінімальна сума замовлення — 100 грн<br>
                    ✔ Робота з Україною та Польщею
                </p>
            </div>
        </div>
    </div>
</section>

<footer>
    <span data-ua="© 2026 3D-PRINT STUDIO · Замовлення 3D-друку" data-pl="© 2026 3D-PRINT STUDIO · Zamówienia druku 3D">
        © 2026 3D-PRINT STUDIO · Замовлення 3D-друку
    </span>
</footer>

<script src="lang.js"></script>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
  import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";
  import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

  const firebaseConfig = {
    apiKey: "AIzaSyBgAl6GL0DQOhE-JpPAABzb4yvOctfpXXI",
    authDomain: "d-print-studio-25787.firebaseapp.com",
    projectId: "d-print-studio-25787",
    storageBucket: "d-print-studio-25787.firebasestorage.app",
    messagingSenderId: "671010955757",
    appId: "1:671010955757:web:633317a7073d5d6f6c07e4"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);
  const auth = getAuth(app);

  // Меню кабінету
  onAuthStateChanged(auth, (user) => {
    const link = document.getElementById('accountLink');
    if (user) {
      link.href = "account.html";
      link.innerText = "Мій Профіль";
      link.setAttribute('data-ua', 'Мій Профіль');
      link.setAttribute('data-pl', 'Mój Profil');
    }
  });

  // Відправка форми
  document.getElementById('orderForm').onsubmit = async (e) => {
    e.preventDefault();
    const btn = e.target.querySelector('button');
    btn.disabled = true;
    btn.innerText = "Надсилаємо...";

    try {
      await addDoc(collection(db, "orders"), {
        name: document.getElementById('custName').value,
        contact: document.getElementById('custContact').value,
        type: document.getElementById('orderType').value,
        material: document.getElementById('material').value,
        description: document.getElementById('orderDesc').value,
        status: "Новий запит",
        timestamp: new Date(),
        userId: auth.currentUser ? auth.currentUser.uid : "guest"
      });
      alert("Дякуємо! Ваше замовлення прийнято на прорахунок.");
      e.target.reset();
    } catch (error) {
      alert("Помилка: " + error.message);
    } finally {
      btn.disabled = false;
      btn.innerText = "Надіслати на прорахунок";
    }
  };
</script>

</body>
</html>
