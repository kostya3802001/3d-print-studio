<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Фігурки та Деталі — 3D-PRINT STUDIO</title>
    <style>
        /* Твій основний стиль залишається без змін */
        body { margin: 0; padding: 0; background-color: #050505; color: #fff; font-family: 'Segoe UI', sans-serif; overflow-x: hidden; }
        header { display: flex; justify-content: space-between; align-items: center; padding: 10px 5%; background-color: rgba(0, 0, 0, 0.8); backdrop-filter: blur(12px); border-bottom: 1px solid rgba(243, 156, 18, 0.2); position: sticky; top: 0; z-index: 1000; }
        .logo { display: flex; align-items: center; font-size: 26px; font-weight: bold; color: #f39c12; text-decoration: none; }
        .logo img { height: 60px; margin-right: 15px; border-radius: 8px; }
        nav a { color: #fff; text-decoration: none; margin-left: 25px; font-size: 15px; font-weight: 500; opacity: 0.8; }
        h2 { text-align: center; width: 100%; margin: 60px 0 20px 0; font-size: 36px; color: #fff; }

        /* Сітка та картки */
        .grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 30px; padding: 20px 5% 60px 5%; }
        .card { background: rgba(20, 20, 20, 0.8); backdrop-filter: blur(10px); border: 1px solid rgba(243, 156, 18, 0.1); border-radius: 15px; padding: 25px; display: flex; flex-direction: column; align-items: center; min-height: 480px; box-sizing: border-box; transition: 0.4s; }
        .card img { width: 100%; height: 200px; object-fit: cover; border-radius: 10px; margin-bottom: 20px; cursor: pointer; transition: 0.3s; }
        .card img:hover { transform: scale(1.03); filter: brightness(1.2); }
        .card p { margin-bottom: 20px; color: #ccc; text-align: center; flex-grow: 1; }

        /* Кнопка */
        .btn { display: inline-block; padding: 12px 35px; background: linear-gradient(135deg, #f39c12 0%, #e67e22 100%); color: #000 !important; font-weight: bold; border-radius: 10px; border: 2px solid #f39c12; cursor: pointer; text-align: center; text-decoration: none; }

        /* --- СТИЛІ ГАЛЕРЕЇ (LIGHTBOX) --- */
        #lightbox {
            display: none;
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 10000;
            justify-content: center;
            align-items: center;
            cursor: zoom-out;
        }
        #lightbox img {
            max-width: 90%;
            max-height: 85%;
            border-radius: 10px;
            box-shadow: 0 0 30px rgba(243, 156, 18, 0.3);
            border: 2px solid #f39c12;
        }

        /* Мобільна адаптація */
        @media (max-width: 1024px) { .grid { grid-template-columns: repeat(2, 1fr); } }
        @media (max-width: 768px) {
            .grid { grid-template-columns: 1fr; padding: 0 20px 40px 20px; gap: 20px; }
            .card { min-height: 400px; }
            .card img { height: 180px; }
        }
    </style>
</head>
<body>

<header>
    <a href="index.html" class="logo">
        <img src="log%20img/%D0%9B%D0%BE%D0%B3%D0%BE%D1%82%D0%B8%D0%BF.jpg" alt="Logo">
        3D-PRINT STUDIO
    </a>
    <nav>
        <a href="index.html">Головна</a>
        <a href="figures.html">Фігурки</a>
        <a href="parts.html">Деталі</a>
        <a href="order.html">Замовити</a>
    </nav>
</header>

<h2>Наші <span>Роботи</span></h2>

<div class="grid" id="catalogContainer">
    </div>

<div id="lightbox" onclick="closeLightbox()">
    <img id="lightboxImg" src="" alt="Full size">
</div>

<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
    import { getFirestore, collection, query, where, onSnapshot } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

    const firebaseConfig = {
        apiKey: "AIzaSyBgAl6GL0DQOhE-JpPAABzb4yvOctfpXXI",
        authDomain: "d-print-studio-25787.firebaseapp.com",
        projectId: "d-print-studio-25787",
        storageBucket: "d-print-studio-25787.firebasestorage.app",
        messagingSenderId: "671010955757",
        appId: "1:671010955757:web:633317a7073d5d6f6c07e4"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    // Функції для галереї (Lightbox)
    window.openLightbox = (src) => {
        const lb = document.getElementById('lightbox');
        const img = document.getElementById('lightboxImg');
        img.src = src;
        lb.style.display = 'flex';
        document.body.style.overflow = 'hidden'; // Заборонити скрол
    };

    window.closeLightbox = () => {
        document.getElementById('lightbox').style.display = 'none';
        document.body.style.overflow = 'auto'; // Повернути скрол
    };

    // Отримання даних (приклад для сторінки, де треба фільтр за категорією)
    // Зміни 'parts' на 'figures' залежно від сторінки
    const category = window.location.pathname.includes('parts') ? 'parts' : 'figures';
    const q = query(collection(db, "catalog"), where("category", "==", category));

    onSnapshot(q, (snapshot) => {
        const container = document.getElementById('catalogContainer');
        container.innerHTML = "";
        snapshot.forEach(doc => {
            const item = doc.data();
            const imgPath = item.img ? (item.img.startsWith('http') ? item.img : `https://raw.githubusercontent.com/kostya3802001/3d-print-studio/main/${item.img}`) : '';
            
            const card = document.createElement('div');
            card.className = 'card';
            card.innerHTML = `
                <img src="${imgPath}" alt="${item.name}" onclick="openLightbox('${imgPath}')">
                <h3>${item.name}</h3>
                <p>${item.desc || ''}</p>
                <div style="color:#f39c12; font-weight:bold; margin-bottom:15px;">від ${item.price} грн</div>
                <button class="btn">Замовити</button>
            `;
            container.appendChild(card);
        });
    });
</script>

</body>
</html>
